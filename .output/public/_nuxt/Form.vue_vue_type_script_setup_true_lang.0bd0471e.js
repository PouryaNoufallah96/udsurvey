import{d as $,E as F,j as I,r as S,k,l as N,$ as D,H,m as j,o as U,i as q,a as d,t as O,u as n,b as s,w as y,B as p,n as P,p as v,q as R,s as G,_ as W}from"./entry.87f1605d.js";import{_ as Y}from"./BaseInput.vue_vue_type_script_setup_true_lang.ee0dc373.js";import{_ as z}from"./BaseDropDown.vue_vue_type_script_setup_true_lang.7472083e.js";import{_ as J}from"./BaseCheckbox.vue_vue_type_script_setup_true_lang.8d157869.js";import{u as K}from"./asyncData.f0c46025.js";import{T as L}from"./handle-toast.69ee9aaa.js";const M={class:"w-full md:w-1/2"},Q={class:"flex justify-between"},X={class:"text-header"},Z=P("\u0628\u0627\u0632\u06AF\u0634\u062A"),ee={class:"flex flex-col md:grid md:grid-cols-2 gap-4"},oe=$({__name:"Form",props:{isEdit:{type:Boolean,default:!1},initialValues:{type:Object,default:()=>({id:null,title:"",surveyCategoryId:0,isActive:!1})}},async setup(c){let u,m;const o=c,{error:_}=L(),{handlingError:C,customClientErrorHandler:A}=F(),b=I(()=>o.isEdit?"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0622\u06CC\u062A\u0645":"\u0627\u0641\u0632\u0648\u062F\u0646 \u0622\u06CC\u062A\u0645"),r=S(o.initialValues.surveyCategoryId),g=k({title:N().required("\u062A\u06CC\u062A\u0631 \u0627\u062C\u0628\u0627\u0631\u06CC \u0627\u0633\u062A").label("Title"),isActive:D().label("IsActive")}),{data:h,error:f}=([u,m]=H(async()=>K("get-survey-category-by-admin-for-survey-item-definition",async()=>{var t=await v("/admin/survey-category/get-survey-categories");return r.value=t.result[0].id,t.result.map(e=>({id:e.id,name:e.title}))},{initialCache:!1},"$TfRmxY1y8d")),u=await u,m(),u);f.value&&C(f.value,(t,e)=>_(t,e));const x=async t=>{var e;try{const a=o.isEdit?"/admin/survey-item-definition/update-survey-item-definition":"/admin/survey-item-definition/add-survey-item-definition",i=o.isEdit?"PUT":"POST",{result:l}=await v(a,{method:i,body:{...t,isActive:(e=t.isActive)!=null?e:!1,surveyCategoryId:r.value}});R("/admin/survey/item-definition")}catch(a){A(a,(i,l)=>_(i,l))}};return(t,e)=>{const a=G,i=Y,l=z,B=J,E=W,V=j("VForm");return U(),q("div",M,[d("div",Q,[d("h2",X,O(n(b)),1),s(a,{to:"/admin/survey/item-definition"},{default:y(()=>[Z]),_:1})]),s(V,{class:"p-8 flex flex-col gap-3 card","validation-schema":n(g),"initial-values":c.initialValues,onSubmit:x},{default:y(({meta:w})=>[d("div",ee,[s(i,{class:"col-span-2",name:"title",label:"\u062A\u06CC\u062A\u0631"}),s(l,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=T=>r.value=T),items:n(h),text:"\u06A9\u062A\u06AF\u0648\u0631\u06CC"},null,8,["modelValue","items"]),s(B,{class:"md:self-end",id:"isActive",name:"isActive",label:"\u0641\u0639\u0627\u0644"})]),s(E,{class:"mt-4",type:"submit","btn-type":c.isEdit?n(p).WARNING:n(p).SUCCESS,text:"\u0630\u062E\u06CC\u0631\u0647",disabled:!w.valid},null,8,["btn-type","disabled"])]),_:1},8,["validation-schema","initial-values"])])}}});export{oe as _};
