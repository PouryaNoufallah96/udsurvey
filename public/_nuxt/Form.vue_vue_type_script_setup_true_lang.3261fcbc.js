import{d as $,E as I,j as T,r as S,k,l as d,$ as D,H as q,m as H,o as U,i as j,a as c,t as P,u as n,b as e,w as C,B as A,n as O,p as b,q as Z,s as G,_ as R}from"./entry.87f1605d.js";import{_ as W}from"./BaseInput.vue_vue_type_script_setup_true_lang.ee0dc373.js";import{_ as X}from"./BaseDropDown.vue_vue_type_script_setup_true_lang.7472083e.js";import{_ as Y}from"./BaseCheckbox.vue_vue_type_script_setup_true_lang.8d157869.js";import{u as z}from"./asyncData.f0c46025.js";import{T as J}from"./handle-toast.69ee9aaa.js";const K={class:"w-full md:w-1/2"},L={class:"flex justify-between"},M={class:"text-header"},Q=O("\u0628\u0627\u0632\u06AF\u0634\u062A"),uu={class:"flex flex-col md:grid md:grid-cols-2 gap-4"},lu=$({__name:"Form",props:{isEdit:{type:Boolean,default:!1},initialValues:{type:Object,default:()=>({id:null,fullName:"",username:"",password:"",isAdmin:!1,customerId:null})}},async setup(r){let o,_;const l=r,{error:p}=J(),{handlingError:y,customClientErrorHandler:F}=I(),h=T(()=>l.isEdit?"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u06A9\u0627\u0631\u0628\u0631":"\u0627\u0641\u0632\u0648\u062F\u0646 \u06A9\u0627\u0631\u0628\u0631"),m=S(l.initialValues.customerId),x=k({fullName:d().required("\u0646\u0627\u0645 \u0648 \u0646\u0627\u0645 \u062E\u0627\u0646\u0648\u0627\u062F\u06AF\u06CC \u0627\u062C\u0628\u0627\u0631\u06CC \u0627\u0633\u062A").label("FullName"),username:d().required().matches(/^0(9\d{9})$/,"\u0634\u0645\u0627\u0631\u0647 \u062A\u0644\u0641\u0646 \u0648\u0627\u0631\u062F \u0634\u062F\u0647 \u0645\u0639\u062A\u0628\u0631 \u0646\u06CC\u0633\u062A").label("Username"),password:d().required().min(6,"\u062A\u0639\u062F\u0627\u062F \u062D\u0631\u0648\u0641 \u0648\u0627\u0631\u062F \u0634\u062F\u0647 \u06A9\u0627\u0641\u06CC \u0646\u06CC\u0633\u062A").label("Password"),isAdmin:D().label("IsAdmin")}),{data:w,error:f}=([o,_]=q(async()=>z("get-customers-by-admin-for-user",async()=>{var s=await b("/admin/customer/get-customers");return s.result.map(u=>({id:u.id,name:u.title}))},{initialCache:!1},"$1Z9bXwxFZY")),o=await o,_(),o);f.value&&y(f.value,(s,u)=>p(s,u));const v=async s=>{var u;try{const t=l.isEdit?"/admin/user/update-user":"/admin/user/add-user",a=l.isEdit?"PUT":"POST",{result:i}=await b(t,{method:a,body:{...s,isAdmin:(u=s.isAdmin)!=null?u:!1,customerId:m.value}});Z("/admin/user")}catch(t){F(t,(a,i)=>p(a,i))}};return(s,u)=>{const t=G,a=W,i=X,E=Y,B=R,V=H("VForm");return U(),j("div",K,[c("div",L,[c("h2",M,P(n(h)),1),e(t,{to:"/admin/user"},{default:C(()=>[Q]),_:1})]),e(V,{class:"p-8 flex flex-col gap-3 card","validation-schema":n(x),"initial-values":r.initialValues,onSubmit:v},{default:C(({meta:g})=>[c("div",uu,[e(a,{class:"col-span-2",name:"fullName",label:"\u0646\u0627\u0645 \u0648 \u0646\u0627\u0645\u200C\u062E\u0627\u0646\u0648\u0627\u062F\u06AF\u06CC"}),e(a,{type:"tel",name:"username",label:"\u062A\u0644\u0641\u0646 \u0647\u0645\u0631\u0627\u0647"}),e(a,{type:"password",name:"password",label:"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631"}),e(i,{modelValue:m.value,"onUpdate:modelValue":u[0]||(u[0]=N=>m.value=N),items:n(w),text:"\u0645\u0634\u062A\u0631\u06CC"},null,8,["modelValue","items"]),e(E,{class:"md:self-end",id:"isAdmin",name:"isAdmin",label:"\u0627\u062F\u0645\u06CC\u0646"})]),e(B,{class:"mt-4",type:"submit","btn-type":r.isEdit?n(A).WARNING:n(A).SUCCESS,text:"\u0630\u062E\u06CC\u0631\u0647",disabled:!g.valid},null,8,["btn-type","disabled"])]),_:1},8,["validation-schema","initial-values"])])}}});export{lu as _};
