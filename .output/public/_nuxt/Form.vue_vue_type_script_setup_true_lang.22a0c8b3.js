import{d as T,E as $,j as F,r as I,k as S,l as k,$ as D,H as N,m as H,o as j,i as U,a as d,t as G,u as n,b as s,w as p,B as v,n as O,p as y,q as P,s as R,_ as W}from"./entry.87f1605d.js";import{_ as Y}from"./BaseInput.vue_vue_type_script_setup_true_lang.ee0dc373.js";import{_ as Z}from"./BaseDropDown.vue_vue_type_script_setup_true_lang.7472083e.js";import{_ as z}from"./BaseCheckbox.vue_vue_type_script_setup_true_lang.8d157869.js";import{u as J}from"./asyncData.f0c46025.js";import{T as K}from"./handle-toast.69ee9aaa.js";const L={class:"w-full md:w-1/2"},M={class:"flex justify-between"},Q={class:"text-header"},X=O("\u0628\u0627\u0632\u06AF\u0634\u062A"),ee={class:"flex flex-col md:grid md:grid-cols-2 gap-4"},oe=T({__name:"Form",props:{isEdit:{type:Boolean,default:!1},initialValues:{type:Object,default:()=>({id:null,title:"",surveyCategoryId:0,isActive:!1})}},async setup(c){let u,m;const o=c,{error:_}=K(),{handlingError:C,customClientErrorHandler:A}=$(),h=F(()=>o.isEdit?"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0633\u0648\u0627\u0644":"\u0627\u0641\u0632\u0648\u062F\u0646 \u0633\u0648\u0627\u0644"),r=I(o.initialValues.surveyCategoryId),b=S({title:k().required("\u062A\u06CC\u062A\u0631 \u0627\u062C\u0628\u0627\u0631\u06CC \u0627\u0633\u062A").label("Title"),isActive:D().label("IsActive")}),{data:g,error:f}=([u,m]=N(async()=>J("get-survey-category-by-admin-for-survey-question-definition",async()=>{var t=await y("/admin/survey-category/get-survey-categories");return r.value=t.result[0].id,t.result.map(e=>({id:e.id,name:e.title}))},{initialCache:!1},"$YRh8Dw2Z1G")),u=await u,m(),u);f.value&&C(f.value,(t,e)=>_(t,e));const x=async t=>{var e;try{const a=o.isEdit?"/admin/survey-question-definition/update-survey-question-definition":"/admin/survey-question-definition/add-survey-question-definition",i=o.isEdit?"PUT":"POST",{result:l}=await y(a,{method:i,body:{...t,isActive:(e=t.isActive)!=null?e:!1,surveyCategoryId:r.value}});P("/admin/survey/question-definition")}catch(a){A(a,(i,l)=>_(i,l))}};return(t,e)=>{const a=R,i=Y,l=Z,B=z,E=W,w=H("VForm");return j(),U("div",L,[d("div",M,[d("h2",Q,G(n(h)),1),s(a,{to:"/admin/survey/question-definition"},{default:p(()=>[X]),_:1})]),s(w,{class:"p-8 flex flex-col gap-3 card","validation-schema":n(b),"initial-values":c.initialValues,onSubmit:x},{default:p(({meta:V})=>[d("div",ee,[s(i,{class:"col-span-2",name:"title",label:"\u062A\u06CC\u062A\u0631"}),s(l,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=q=>r.value=q),items:n(g),text:"\u06A9\u062A\u06AF\u0648\u0631\u06CC"},null,8,["modelValue","items"]),s(B,{class:"md:self-end",id:"isActive",name:"isActive",label:"\u0641\u0639\u0627\u0644"})]),s(E,{class:"mt-4",type:"submit","btn-type":c.isEdit?n(v).WARNING:n(v).SUCCESS,text:"\u0630\u062E\u06CC\u0631\u0647",disabled:!V.valid},null,8,["btn-type","disabled"])]),_:1},8,["validation-schema","initial-values"])])}}});export{oe as _};
